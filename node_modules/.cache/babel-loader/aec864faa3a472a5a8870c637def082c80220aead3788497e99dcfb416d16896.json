{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Luis Escorcia T-blue\\\\Pictures\\\\chat-app\\\\chat-app\\\\src\\\\components\\\\Sidebar.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../utils/supabaseClient';\nimport { useAuth } from '../context/AuthContext';\nimport { formatDistanceToNow } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport './Sidebar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AvatarEl({\n  profile,\n  size = 40\n}) {\n  if (profile !== null && profile !== void 0 && profile.avatar_url) {\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      src: profile.avatar_url,\n      alt: \"\",\n      className: \"avatar\",\n      style: {\n        width: size,\n        height: size\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 12\n    }, this);\n  }\n  const initial = ((profile === null || profile === void 0 ? void 0 : profile.display_name) || (profile === null || profile === void 0 ? void 0 : profile.username) || '?')[0].toUpperCase();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avatar-placeholder\",\n    style: {\n      width: size,\n      height: size,\n      fontSize: size * 0.38\n    },\n    children: initial\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }, this);\n}\n_c = AvatarEl;\nexport default function Sidebar({\n  selectedConvId,\n  onSelectConv\n}) {\n  _s();\n  const {\n    user,\n    profile,\n    signOut\n  } = useAuth();\n  const [tab, setTab] = useState('chats'); // 'chats' | 'friends' | 'profile'\n  const [conversations, setConversations] = useState([]);\n  const [pendingRequests, setPendingRequests] = useState([]);\n  const [searchUsername, setSearchUsername] = useState('');\n  const [searchResult, setSearchResult] = useState(null);\n  const [searchError, setSearchError] = useState('');\n  const [unreadMap, setUnreadMap] = useState({});\n  useEffect(() => {\n    fetchConversations();\n    fetchPendingRequests();\n\n    // Realtime para mensajes nuevos\n    const msgSub = supabase.channel('sidebar-messages').on('postgres_changes', {\n      event: 'INSERT',\n      schema: 'public',\n      table: 'messages'\n    }, () => {\n      fetchConversations();\n    }).on('postgres_changes', {\n      event: 'UPDATE',\n      schema: 'public',\n      table: 'messages'\n    }, () => {\n      fetchConversations();\n    }).subscribe();\n    const reqSub = supabase.channel('sidebar-requests').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'friend_requests'\n    }, () => {\n      fetchPendingRequests();\n    }).subscribe();\n    return () => {\n      supabase.removeChannel(msgSub);\n      supabase.removeChannel(reqSub);\n    };\n  }, [user.id]);\n  async function fetchConversations() {\n    const {\n      data\n    } = await supabase.from('conversations').select(`\n        id, created_at,\n        user1:profiles!conversations_user1_id_fkey(id, username, display_name, avatar_url),\n        user2:profiles!conversations_user2_id_fkey(id, username, display_name, avatar_url)\n      `).or(`user1_id.eq.${user.id},user2_id.eq.${user.id}`).order('created_at', {\n      ascending: false\n    });\n    if (!data) return;\n\n    // Para cada conversaci√≥n, obtener √∫ltimo mensaje y contar no le√≠dos\n    const enriched = await Promise.all(data.map(async conv => {\n      const {\n        data: msgs\n      } = await supabase.from('messages').select('content, file_name, message_type, is_read, sender_id, created_at').eq('conversation_id', conv.id).order('created_at', {\n        ascending: false\n      }).limit(1);\n      const {\n        count\n      } = await supabase.from('messages').select('id', {\n        count: 'exact',\n        head: true\n      }).eq('conversation_id', conv.id).eq('is_read', false).neq('sender_id', user.id);\n      const other = conv.user1.id === user.id ? conv.user2 : conv.user1;\n      return {\n        ...conv,\n        other,\n        lastMessage: (msgs === null || msgs === void 0 ? void 0 : msgs[0]) || null,\n        unreadCount: count || 0\n      };\n    }));\n\n    // Ordenar por √∫ltimo mensaje\n    enriched.sort((a, b) => {\n      var _a$lastMessage, _b$lastMessage;\n      const aTime = ((_a$lastMessage = a.lastMessage) === null || _a$lastMessage === void 0 ? void 0 : _a$lastMessage.created_at) || a.created_at;\n      const bTime = ((_b$lastMessage = b.lastMessage) === null || _b$lastMessage === void 0 ? void 0 : _b$lastMessage.created_at) || b.created_at;\n      return new Date(bTime) - new Date(aTime);\n    });\n    setConversations(enriched);\n  }\n  async function fetchPendingRequests() {\n    const {\n      data\n    } = await supabase.from('friend_requests').select(`*, sender:profiles!friend_requests_sender_id_fkey(id, username, display_name, avatar_url)`).eq('receiver_id', user.id).eq('status', 'pending');\n    setPendingRequests(data || []);\n  }\n  async function searchUser() {\n    if (!searchUsername.trim()) return;\n    setSearchResult(null);\n    setSearchError('');\n    const username = searchUsername.toLowerCase().replace('@', '');\n    if (username === (profile === null || profile === void 0 ? void 0 : profile.username)) {\n      setSearchError('No puedes enviarte una solicitud a ti mismo');\n      return;\n    }\n    const {\n      data\n    } = await supabase.from('profiles').select('*').eq('username', username).single();\n    if (!data) {\n      setSearchError('Usuario no encontrado');\n      return;\n    }\n\n    // Verificar si ya son amigos o hay solicitud pendiente\n    const {\n      data: existing\n    } = await supabase.from('friend_requests').select('status').or(`and(sender_id.eq.${user.id},receiver_id.eq.${data.id}),and(sender_id.eq.${data.id},receiver_id.eq.${user.id})`).single();\n    setSearchResult({\n      ...data,\n      existingRequest: existing\n    });\n  }\n  async function sendFriendRequest(receiverId) {\n    const {\n      error\n    } = await supabase.from('friend_requests').insert({\n      sender_id: user.id,\n      receiver_id: receiverId\n    });\n    if (!error) {\n      setSearchResult(prev => ({\n        ...prev,\n        existingRequest: {\n          status: 'pending'\n        }\n      }));\n    }\n  }\n  async function respondRequest(requestId, senderId, status) {\n    await supabase.from('friend_requests').update({\n      status\n    }).eq('id', requestId);\n    if (status === 'accepted') {\n      // Crear conversaci√≥n\n      const user1 = user.id < senderId ? user.id : senderId;\n      const user2 = user.id < senderId ? senderId : user.id;\n      await supabase.from('conversations').upsert({\n        user1_id: user1,\n        user2_id: user2\n      });\n      fetchConversations();\n    }\n    fetchPendingRequests();\n  }\n  function getLastMessageText(msg) {\n    if (!msg) return 'Sin mensajes a√∫n';\n    if (msg.message_type === 'file') return `üìé ${msg.file_name}`;\n    return msg.content;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sidebar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"sidebar-title\",\n        children: \"Chattr\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-btn\",\n        onClick: signOut,\n        title: \"Cerrar sesi\\xF3n\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"18\",\n          height: \"18\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab ${tab === 'chats' ? 'active' : ''}`,\n        onClick: () => setTab('chats'),\n        children: \"Chats\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab ${tab === 'friends' ? 'active' : ''}`,\n        onClick: () => setTab('friends'),\n        children: [\"Amigos\", pendingRequests.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge\",\n          children: pendingRequests.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 42\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab ${tab === 'profile' ? 'active' : ''}`,\n        onClick: () => setTab('profile'),\n        children: \"Perfil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), tab === 'chats' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-content\",\n      children: conversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"A\\xFAn no tienes conversaciones\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: \"A\\xF1ade amigos para comenzar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }, this) : conversations.map(conv => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `conv-item ${selectedConvId === conv.id ? 'active' : ''}`,\n        onClick: () => onSelectConv(conv),\n        children: [/*#__PURE__*/_jsxDEV(AvatarEl, {\n          profile: conv.other,\n          size: 44\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conv-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"conv-top\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"conv-name\",\n              children: conv.other.display_name || conv.other.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 21\n            }, this), conv.lastMessage && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"conv-time\",\n              children: formatDistanceToNow(new Date(conv.lastMessage.created_at), {\n                locale: es,\n                addSuffix: false\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"conv-bottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"conv-last\",\n              children: getLastMessageText(conv.lastMessage)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 21\n            }, this), conv.unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge\",\n              children: conv.unreadCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 46\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 17\n        }, this)]\n      }, conv.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }, this), tab === 'friends' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-user\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Buscar por @usuario\",\n            value: searchUsername,\n            onChange: e => setSearchUsername(e.target.value),\n            onKeyDown: e => e.key === 'Enter' && searchUser()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: searchUser,\n            children: \"Buscar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), searchError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"search-error\",\n          children: searchError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 29\n        }, this), searchResult && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-result\",\n          children: [/*#__PURE__*/_jsxDEV(AvatarEl, {\n            profile: searchResult,\n            size: 36\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"result-name\",\n              children: searchResult.display_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"result-username\",\n              children: [\"@\", searchResult.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 17\n          }, this), searchResult.existingRequest ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"request-status\",\n            children: searchResult.existingRequest.status === 'pending' ? '‚è≥ Pendiente' : '‚úì Amigos'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            style: {\n              padding: '6px 14px',\n              fontSize: 13\n            },\n            onClick: () => sendFriendRequest(searchResult.id),\n            children: \"Agregar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this), pendingRequests.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"requests-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"section-label\",\n          children: \"Solicitudes recibidas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }, this), pendingRequests.map(req => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"request-item\",\n          children: [/*#__PURE__*/_jsxDEV(AvatarEl, {\n            profile: req.sender,\n            size: 38\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"request-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"result-name\",\n              children: req.sender.display_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"result-username\",\n              children: [\"@\", req.sender.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"request-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              style: {\n                padding: '5px 12px',\n                fontSize: 12\n              },\n              onClick: () => respondRequest(req.id, req.sender.id, 'accepted'),\n              children: \"\\u2713\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-ghost\",\n              style: {\n                padding: '5px 12px',\n                fontSize: 12\n              },\n              onClick: () => respondRequest(req.id, req.sender.id, 'rejected'),\n              children: \"\\u2715\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 19\n          }, this)]\n        }, req.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }, this), tab === 'profile' && profile && /*#__PURE__*/_jsxDEV(ProfileTab, {\n      profile: profile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n}\n_s(Sidebar, \"+6N1OBBCt6PGyEhcseEfTKecue8=\", false, function () {\n  return [useAuth];\n});\n_c2 = Sidebar;\nfunction ProfileTab({\n  profile\n}) {\n  _s2();\n  const {\n    updateProfile\n  } = useAuth();\n  const [form, setForm] = useState({\n    display_name: profile.display_name || '',\n    bio: profile.bio || ''\n  });\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n  async function handleSave() {\n    setSaving(true);\n    await updateProfile(form);\n    setSaving(false);\n    setSaved(true);\n    setTimeout(() => setSaved(false), 2000);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sidebar-content profile-tab\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-avatar-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar-placeholder\",\n        style: {\n          width: 72,\n          height: 72,\n          fontSize: 28\n        },\n        children: (profile.display_name || profile.username || '?')[0].toUpperCase()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"profile-username\",\n        children: [\"@\", profile.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nombre para mostrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: form.display_name,\n          onChange: e => setForm(p => ({\n            ...p,\n            display_name: e.target.value\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Bio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          rows: 3,\n          placeholder: \"Cu\\xE9ntanos algo sobre ti...\",\n          value: form.bio,\n          onChange: e => setForm(p => ({\n            ...p,\n            bio: e.target.value\n          })),\n          style: {\n            resize: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: handleSave,\n        disabled: saving,\n        children: saved ? '‚úì Guardado' : saving ? 'Guardando...' : 'Guardar cambios'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 5\n  }, this);\n}\n_s2(ProfileTab, \"7vBICxg48yIacLa0Om4SEFnqMeQ=\", false, function () {\n  return [useAuth];\n});\n_c3 = ProfileTab;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AvatarEl\");\n$RefreshReg$(_c2, \"Sidebar\");\n$RefreshReg$(_c3, \"ProfileTab\");","map":{"version":3,"names":["useState","useEffect","supabase","useAuth","formatDistanceToNow","es","jsxDEV","_jsxDEV","AvatarEl","profile","size","avatar_url","src","alt","className","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","initial","display_name","username","toUpperCase","fontSize","children","_c","Sidebar","selectedConvId","onSelectConv","_s","user","signOut","tab","setTab","conversations","setConversations","pendingRequests","setPendingRequests","searchUsername","setSearchUsername","searchResult","setSearchResult","searchError","setSearchError","unreadMap","setUnreadMap","fetchConversations","fetchPendingRequests","msgSub","channel","on","event","schema","table","subscribe","reqSub","removeChannel","id","data","from","select","or","order","ascending","enriched","Promise","all","map","conv","msgs","eq","limit","count","head","neq","other","user1","user2","lastMessage","unreadCount","sort","a","b","_a$lastMessage","_b$lastMessage","aTime","created_at","bTime","Date","searchUser","trim","toLowerCase","replace","single","existing","existingRequest","sendFriendRequest","receiverId","error","insert","sender_id","receiver_id","prev","status","respondRequest","requestId","senderId","update","upsert","user1_id","user2_id","getLastMessageText","msg","message_type","file_name","content","onClick","title","viewBox","fill","stroke","strokeWidth","d","length","locale","addSuffix","placeholder","value","onChange","e","target","onKeyDown","key","padding","req","sender","ProfileTab","_c2","_s2","updateProfile","form","setForm","bio","saving","setSaving","saved","setSaved","handleSave","setTimeout","p","rows","resize","disabled","_c3","$RefreshReg$"],"sources":["C:/Users/Luis Escorcia T-blue/Pictures/chat-app/chat-app/src/components/Sidebar.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { supabase } from '../utils/supabaseClient'\nimport { useAuth } from '../context/AuthContext'\nimport { formatDistanceToNow } from 'date-fns'\nimport { es } from 'date-fns/locale'\nimport './Sidebar.css'\n\nfunction AvatarEl({ profile, size = 40 }) {\n  if (profile?.avatar_url) {\n    return <img src={profile.avatar_url} alt=\"\" className=\"avatar\" style={{ width: size, height: size }} />\n  }\n  const initial = (profile?.display_name || profile?.username || '?')[0].toUpperCase()\n  return (\n    <div className=\"avatar-placeholder\" style={{ width: size, height: size, fontSize: size * 0.38 }}>\n      {initial}\n    </div>\n  )\n}\n\nexport default function Sidebar({ selectedConvId, onSelectConv }) {\n  const { user, profile, signOut } = useAuth()\n  const [tab, setTab] = useState('chats') // 'chats' | 'friends' | 'profile'\n  const [conversations, setConversations] = useState([])\n  const [pendingRequests, setPendingRequests] = useState([])\n  const [searchUsername, setSearchUsername] = useState('')\n  const [searchResult, setSearchResult] = useState(null)\n  const [searchError, setSearchError] = useState('')\n  const [unreadMap, setUnreadMap] = useState({})\n\n  useEffect(() => {\n    fetchConversations()\n    fetchPendingRequests()\n\n    // Realtime para mensajes nuevos\n    const msgSub = supabase\n      .channel('sidebar-messages')\n      .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages' }, () => {\n        fetchConversations()\n      })\n      .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'messages' }, () => {\n        fetchConversations()\n      })\n      .subscribe()\n\n    const reqSub = supabase\n      .channel('sidebar-requests')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'friend_requests' }, () => {\n        fetchPendingRequests()\n      })\n      .subscribe()\n\n    return () => {\n      supabase.removeChannel(msgSub)\n      supabase.removeChannel(reqSub)\n    }\n  }, [user.id])\n\n  async function fetchConversations() {\n    const { data } = await supabase\n      .from('conversations')\n      .select(`\n        id, created_at,\n        user1:profiles!conversations_user1_id_fkey(id, username, display_name, avatar_url),\n        user2:profiles!conversations_user2_id_fkey(id, username, display_name, avatar_url)\n      `)\n      .or(`user1_id.eq.${user.id},user2_id.eq.${user.id}`)\n      .order('created_at', { ascending: false })\n\n    if (!data) return\n\n    // Para cada conversaci√≥n, obtener √∫ltimo mensaje y contar no le√≠dos\n    const enriched = await Promise.all(data.map(async (conv) => {\n      const { data: msgs } = await supabase\n        .from('messages')\n        .select('content, file_name, message_type, is_read, sender_id, created_at')\n        .eq('conversation_id', conv.id)\n        .order('created_at', { ascending: false })\n        .limit(1)\n\n      const { count } = await supabase\n        .from('messages')\n        .select('id', { count: 'exact', head: true })\n        .eq('conversation_id', conv.id)\n        .eq('is_read', false)\n        .neq('sender_id', user.id)\n\n      const other = conv.user1.id === user.id ? conv.user2 : conv.user1\n      return { ...conv, other, lastMessage: msgs?.[0] || null, unreadCount: count || 0 }\n    }))\n\n    // Ordenar por √∫ltimo mensaje\n    enriched.sort((a, b) => {\n      const aTime = a.lastMessage?.created_at || a.created_at\n      const bTime = b.lastMessage?.created_at || b.created_at\n      return new Date(bTime) - new Date(aTime)\n    })\n\n    setConversations(enriched)\n  }\n\n  async function fetchPendingRequests() {\n    const { data } = await supabase\n      .from('friend_requests')\n      .select(`*, sender:profiles!friend_requests_sender_id_fkey(id, username, display_name, avatar_url)`)\n      .eq('receiver_id', user.id)\n      .eq('status', 'pending')\n    setPendingRequests(data || [])\n  }\n\n  async function searchUser() {\n    if (!searchUsername.trim()) return\n    setSearchResult(null)\n    setSearchError('')\n    const username = searchUsername.toLowerCase().replace('@', '')\n\n    if (username === profile?.username) {\n      setSearchError('No puedes enviarte una solicitud a ti mismo')\n      return\n    }\n\n    const { data } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('username', username)\n      .single()\n\n    if (!data) { setSearchError('Usuario no encontrado'); return }\n\n    // Verificar si ya son amigos o hay solicitud pendiente\n    const { data: existing } = await supabase\n      .from('friend_requests')\n      .select('status')\n      .or(`and(sender_id.eq.${user.id},receiver_id.eq.${data.id}),and(sender_id.eq.${data.id},receiver_id.eq.${user.id})`)\n      .single()\n\n    setSearchResult({ ...data, existingRequest: existing })\n  }\n\n  async function sendFriendRequest(receiverId) {\n    const { error } = await supabase\n      .from('friend_requests')\n      .insert({ sender_id: user.id, receiver_id: receiverId })\n    if (!error) {\n      setSearchResult(prev => ({ ...prev, existingRequest: { status: 'pending' } }))\n    }\n  }\n\n  async function respondRequest(requestId, senderId, status) {\n    await supabase\n      .from('friend_requests')\n      .update({ status })\n      .eq('id', requestId)\n\n    if (status === 'accepted') {\n      // Crear conversaci√≥n\n      const user1 = user.id < senderId ? user.id : senderId\n      const user2 = user.id < senderId ? senderId : user.id\n      await supabase.from('conversations').upsert({ user1_id: user1, user2_id: user2 })\n      fetchConversations()\n    }\n    fetchPendingRequests()\n  }\n\n  function getLastMessageText(msg) {\n    if (!msg) return 'Sin mensajes a√∫n'\n    if (msg.message_type === 'file') return `üìé ${msg.file_name}`\n    return msg.content\n  }\n\n  return (\n    <div className=\"sidebar\">\n      {/* Header */}\n      <div className=\"sidebar-header\">\n        <span className=\"sidebar-title\">Chattr</span>\n        <button className=\"icon-btn\" onClick={signOut} title=\"Cerrar sesi√≥n\">\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9\"/>\n          </svg>\n        </button>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"sidebar-tabs\">\n        <button className={`tab ${tab === 'chats' ? 'active' : ''}`} onClick={() => setTab('chats')}>\n          Chats\n        </button>\n        <button className={`tab ${tab === 'friends' ? 'active' : ''}`} onClick={() => setTab('friends')}>\n          Amigos\n          {pendingRequests.length > 0 && <span className=\"badge\">{pendingRequests.length}</span>}\n        </button>\n        <button className={`tab ${tab === 'profile' ? 'active' : ''}`} onClick={() => setTab('profile')}>\n          Perfil\n        </button>\n      </div>\n\n      {/* CHATS TAB */}\n      {tab === 'chats' && (\n        <div className=\"sidebar-content\">\n          {conversations.length === 0 ? (\n            <div className=\"empty-state\">\n              <p>A√∫n no tienes conversaciones</p>\n              <small>A√±ade amigos para comenzar</small>\n            </div>\n          ) : (\n            conversations.map(conv => (\n              <div\n                key={conv.id}\n                className={`conv-item ${selectedConvId === conv.id ? 'active' : ''}`}\n                onClick={() => onSelectConv(conv)}\n              >\n                <AvatarEl profile={conv.other} size={44} />\n                <div className=\"conv-info\">\n                  <div className=\"conv-top\">\n                    <span className=\"conv-name\">{conv.other.display_name || conv.other.username}</span>\n                    {conv.lastMessage && (\n                      <span className=\"conv-time\">\n                        {formatDistanceToNow(new Date(conv.lastMessage.created_at), { locale: es, addSuffix: false })}\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"conv-bottom\">\n                    <span className=\"conv-last\">{getLastMessageText(conv.lastMessage)}</span>\n                    {conv.unreadCount > 0 && <span className=\"badge\">{conv.unreadCount}</span>}\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      )}\n\n      {/* FRIENDS TAB */}\n      {tab === 'friends' && (\n        <div className=\"sidebar-content\">\n          {/* Buscar usuario */}\n          <div className=\"search-user\">\n            <div className=\"search-row\">\n              <input\n                placeholder=\"Buscar por @usuario\"\n                value={searchUsername}\n                onChange={e => setSearchUsername(e.target.value)}\n                onKeyDown={e => e.key === 'Enter' && searchUser()}\n              />\n              <button className=\"btn btn-primary\" onClick={searchUser}>Buscar</button>\n            </div>\n\n            {searchError && <p className=\"search-error\">{searchError}</p>}\n\n            {searchResult && (\n              <div className=\"search-result\">\n                <AvatarEl profile={searchResult} size={36} />\n                <div>\n                  <p className=\"result-name\">{searchResult.display_name}</p>\n                  <p className=\"result-username\">@{searchResult.username}</p>\n                </div>\n                {searchResult.existingRequest ? (\n                  <span className=\"request-status\">\n                    {searchResult.existingRequest.status === 'pending' ? '‚è≥ Pendiente' : '‚úì Amigos'}\n                  </span>\n                ) : (\n                  <button className=\"btn btn-primary\" style={{ padding: '6px 14px', fontSize: 13 }}\n                    onClick={() => sendFriendRequest(searchResult.id)}>\n                    Agregar\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Solicitudes pendientes */}\n          {pendingRequests.length > 0 && (\n            <div className=\"requests-section\">\n              <p className=\"section-label\">Solicitudes recibidas</p>\n              {pendingRequests.map(req => (\n                <div key={req.id} className=\"request-item\">\n                  <AvatarEl profile={req.sender} size={38} />\n                  <div className=\"request-info\">\n                    <p className=\"result-name\">{req.sender.display_name}</p>\n                    <p className=\"result-username\">@{req.sender.username}</p>\n                  </div>\n                  <div className=\"request-actions\">\n                    <button className=\"btn btn-primary\" style={{ padding: '5px 12px', fontSize: 12 }}\n                      onClick={() => respondRequest(req.id, req.sender.id, 'accepted')}>‚úì</button>\n                    <button className=\"btn btn-ghost\" style={{ padding: '5px 12px', fontSize: 12 }}\n                      onClick={() => respondRequest(req.id, req.sender.id, 'rejected')}>‚úï</button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* PROFILE TAB */}\n      {tab === 'profile' && profile && (\n        <ProfileTab profile={profile} />\n      )}\n    </div>\n  )\n}\n\nfunction ProfileTab({ profile }) {\n  const { updateProfile } = useAuth()\n  const [form, setForm] = useState({\n    display_name: profile.display_name || '',\n    bio: profile.bio || ''\n  })\n  const [saving, setSaving] = useState(false)\n  const [saved, setSaved] = useState(false)\n\n  async function handleSave() {\n    setSaving(true)\n    await updateProfile(form)\n    setSaving(false)\n    setSaved(true)\n    setTimeout(() => setSaved(false), 2000)\n  }\n\n  return (\n    <div className=\"sidebar-content profile-tab\">\n      <div className=\"profile-avatar-section\">\n        <div className=\"avatar-placeholder\" style={{ width: 72, height: 72, fontSize: 28 }}>\n          {(profile.display_name || profile.username || '?')[0].toUpperCase()}\n        </div>\n        <p className=\"profile-username\">@{profile.username}</p>\n      </div>\n\n      <div className=\"profile-form\">\n        <div className=\"form-group\">\n          <label>Nombre para mostrar</label>\n          <input\n            value={form.display_name}\n            onChange={e => setForm(p => ({ ...p, display_name: e.target.value }))}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Bio</label>\n          <textarea\n            rows={3}\n            placeholder=\"Cu√©ntanos algo sobre ti...\"\n            value={form.bio}\n            onChange={e => setForm(p => ({ ...p, bio: e.target.value }))}\n            style={{ resize: 'none' }}\n          />\n        </div>\n        <button className=\"btn btn-primary\" onClick={handleSave} disabled={saving}>\n          {saved ? '‚úì Guardado' : saving ? 'Guardando...' : 'Guardar cambios'}\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}